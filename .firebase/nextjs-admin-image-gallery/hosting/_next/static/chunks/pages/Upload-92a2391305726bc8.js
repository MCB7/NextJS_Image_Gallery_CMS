(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[521],{2238:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Upload",function(){return a(8377)}])},9690:function(e,t,a){"use strict";var n=a(5893),l=a(1163),s=a(7294),r=a(175);let i=e=>{let{children:t}=e,a=(0,l.useRouter)(),{user:i}=(0,r.a)();return(0,s.useEffect)(()=>{i.uid||a.push("/login")},[a,i]),(0,n.jsx)("div",{children:i?t:null})};t.Z=i},8377:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var n=a(5893),l=a(7294),s=a(8039),r=a(3446),i=a.n(r),o=a(9828),c=a(6650);let u=()=>{let[e,t]=(0,l.useState)(""),[a,r]=(0,l.useState)(""),[u,d]=(0,l.useState)(""),[g,h]=(0,l.useState)(""),[p,f]=(0,l.useState)(""),[x,m]=(0,l.useState)(""),[j,v]=(0,l.useState)(""),[b,y]=(0,l.useState)(),[S,w]=(0,l.useState)(""),_=(0,c.cF)(),C=e=>{e.preventDefault()},[N,k]=(0,l.useState)(!1),[E,U]=(0,l.useState)(0),F=e=>{e&&e[0].size<1e7&&(y(e[0]),console.log(e[0]))},P=()=>{if(b){let e=(0,c.iH)(_,"".concat(u)),a=(0,c.B0)(e,b);a.on("state_changed",e=>{let t=e.bytesTransferred/e.totalBytes*100;switch(U(t),e.state){case"paused":console.log("Upload is paused");break;case"running":console.log("Upload is running")}},e=>{e.message},()=>{(0,c.Jt)(a.snapshot.ref).then(async e=>{w(e);let a=(0,o.JU)(s.R,"art/".concat(u));try{await (0,o.pl)(a,{title:u,date:g,dimensions:p,medium:x,price:j,url:e}),r("Art added successfully to Gallery"),d(""),h(""),f(""),m(""),v(""),w(""),U(0)}catch(e){t("An error occurred while uploading art")}})})}};return(0,l.useEffect)(()=>{console.log(E)},[E]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{style:{width:"50%",height:"5vh",marginLeft:"25%",display:"flex"},children:(0,n.jsx)("div",{style:{width:E+"%",height:"100%",background:"linear-gradient(180deg, rgba(154,154,154,1) 3%, rgba(180,180,180,1) 14%, rgba(194,194,194,1) 21%, rgba(247,247,247,1) 38%, rgba(249,249,249,1) 44%, rgba(251,251,251,1) 48%, rgba(248,248,248,1) 55%, rgba(244,244,244,1) 58%, rgba(217,217,217,1) 73%, rgba(156,156,156,1) 99%)",borderRadius:"10px"}})}),(0,n.jsx)("section",{className:i().UPLOADcontainer,children:(0,n.jsxs)("section",{className:i().FormArea,children:[e?(0,n.jsx)("div",{style:{alignContent:"center",margin:"auto",alignItems:"center",display:"flex"},children:(0,n.jsx)("p",{style:{margin:"auto",fontSize:"2vw",color:"rgb(64, 65, 76)"},children:e})}):null,a?(0,n.jsx)("div",{style:{alignContent:"center",margin:"auto",alignItems:"center",display:"flex"},children:(0,n.jsx)("p",{style:{margin:"auto",fontSize:"2vw",color:"rgb(64, 65, 76)"},children:a})}):null,(0,n.jsxs)("form",{onSubmit:C,className:i().form,children:[(0,n.jsx)("input",{type:"file",placeholder:"Select file to upload",accept:"image/png",onChange:e=>F(e.target.files)}),(0,n.jsx)("input",{type:"text",placeholder:"Title",onChange:e=>d(e.target.value),value:u}),(0,n.jsx)("input",{type:"text",placeholder:"Date",onChange:e=>h(e.target.value),value:g}),(0,n.jsx)("input",{type:"text",placeholder:"Dimensions",onChange:e=>f(e.target.value),value:p}),(0,n.jsx)("input",{type:"text",placeholder:"Medium",onChange:e=>m(e.target.value),value:x}),(0,n.jsx)("input",{type:"text",placeholder:"Price",onChange:e=>v(e.target.value),value:j}),(0,n.jsx)("button",{onClick:P,children:"Upload"})]})]})})]})};var d=a(9690),g=a(5675),h=a.n(g);let p=()=>null!=s.I.currentUser?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(d.Z,{children:(0,n.jsx)(u,{})})}):(0,n.jsx)(d.Z,{children:(0,n.jsx)("div",{className:i().SPINNERbox,children:(0,n.jsx)(h(),{src:"https://firebasestorage.googleapis.com/v0/b/nextjs-image-gallery.appspot.com/o/spinner%2Floader-min%20(3).gif?alt=media&token=e6f5c9da-af4d-4590-96ec-b29f5da82a06",width:640,height:360,alt:"loading",unoptimized:!0})})});var f=p}},function(e){e.O(0,[675,650,774,888,179],function(){return e(e.s=2238)}),_N_E=e.O()}]);